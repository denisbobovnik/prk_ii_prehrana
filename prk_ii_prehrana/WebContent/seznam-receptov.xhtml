<html
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:p="http://primefaces.org/ui">
	
	<h:body>
	<ui:composition template="WEB-INF/template/template-all.xhtml">
		
		
		<ui:define name="title">
			Recepti
		</ui:define>
		
		<ui:insert name="pageLoader">
		</ui:insert>
		
		<ui:insert name="header">
		</ui:insert>
		
		<ui:define name="content">
			<f:view>

				<!-- page section -->
				<div class="services-card-section spad">
					<div class="container">
						<div class="row">
							<ui:repeat var="recept" value="#{ReceptJSFBean.rD.vrniVse()}" varStatus="loop">
								<h:outputText value="&lt;/div&gt;&lt;div class='row'&gt;" escape="false" rendered="#{not loop.first and loop.index % 3 == 0}" />
								<!-- Single Card -->
								<div class="col-md-4 col-sm-12">
									<div class="sv-card">
										<div class="card-img">
											<p:graphicImage id="image" alt="slika" url="/ImageServlet?klic=recept&amp;id=#{recept.id_recept}" height="270"/>
										</div>
										<div class="card-text">
											<h2 class="post-title"><h:outputText value="#{recept.ime}" /></h2>
											<p><h:outputText escape="false" style="word-wrap: break-word;" value="#{ReceptJSFBean.trimContent121(recept.opis)}" /></p>
											<h:form style="display:inline-block;">
												<h:commandLink class="read-more" value="Ogled" action="recept.xhtml" actionListener="#{ReceptJSFBean.izberiRecept(recept.id_recept)}"></h:commandLink>
											</h:form>
											
											<ui:fragment rendered="#{facesContext.externalContext.isUserInRole('STROKOVNJAK')}">
												<h:form style="display:inline-block; margin-left: 20px;">
													<h:commandLink class="read-more" value="Uredi" action="urejanje-recepta.xhtml" actionListener="#{ReceptJSFBean.urediRecept(recept.id_recept)}"></h:commandLink>
												</h:form>
											</ui:fragment>
										</div>
									</div>
								</div>
							</ui:repeat>
						</div>
					</div>
				</div>
				<!-- page section end-->

			</f:view>
		</ui:define>
		
		<ui:insert name="footer">
		</ui:insert>
		
		<ui:insert name="jsAndJQuery">
		</ui:insert>
	
	</ui:composition>
	</h:body>
</html>